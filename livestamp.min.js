/*! Livestamp.js / v1.2.0 / (c) 2014 Jack Lawson / MIT License / https://github.com/ajacksified/livestampjs  */!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):a(jQuery,moment)}(function(a,b){var c=1e3,d=!1,e=a([]),f=function(){i.resume()},g=function(c,d,f){var g=c.data("livestampdata");if("number"==typeof d&&(d*=1e3),c.removeAttr("data-livestamp").removeData("livestamp"),d=b(d),b.isMoment(d)&&!isNaN(+d)){var h=a.extend({},{original:c.contents()},g);h.moment=b(d),h.ago=f.ago||c.attr("data-ago")||!0,c.data("livestampdata",h).empty(),e.push(c[0])}},h=function(){d||(i.update(),setTimeout(h,c))},i={update:function(){a("[data-livestamp]").each(function(){var b=a(this);g(b,b.data("livestamp"))});var c=[];e.each(function(){var d=a(this),e=d.data("livestampdata");if(void 0===e)c.push(this);else if(b.isMoment(e.moment)){var f=d.html();if(to=e.ago?e.moment.fromNow():e.moment.fromNow(!0),f!=to){var g=a.Event("change.livestamp");d.trigger(g,[f,to]),g.isDefaultPrevented()||d.html(to)}}}),e=e.not(c),delete e.prevObject},pause:function(){d=!0},resume:function(){d=!1,h()},interval:function(a){return void 0===a?c:(c=a,void 0)}},j={add:function(c,d){return c.each(function(){var c=d.timestamp;"number"==typeof c&&(c*=1e3),d.attr&&!c&&(c=a(this).attr(d.attr)),c=b(c),b.isMoment(c)&&!isNaN(+c)&&g(a(this),c,d)}),i.update(),c},destroy:function(b){return e=e.not(b),b.each(function(){var c=a(this),d=c.data("livestampdata");return void 0===d?b:(c.html(d.original?d.original:"").removeData("livestampdata"),void 0)}),b},isLivestamp:function(a){return void 0!==a.data("livestampdata")}};a.livestamp=i,a(f),a.fn.livestamp=function(a,b){return j[a]||(b=a,a="add"),j[a](this,b)}});
